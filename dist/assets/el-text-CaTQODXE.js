import{g as T,s as A,r as x,j as k,aB as _,i as y,A as g,aC as E,E as F,b as z,k as B,l as w,y as R,e as H,L as b,J as I,aw as U,c as W,o as D,w as K,p as L,I as N,x as P,a8 as j,ao as J,ai as M}from"./index-I_gPe0e3.js";import{e as $,b as q}from"./use-form-common-props-CCGO3mJC.js";function tt(r,{disabled:e,beforeFocus:s,afterFocus:p,beforeBlur:l,afterBlur:c}={}){const f=T(),{emit:t}=f,a=A(),o=x(!1),d=n=>{const i=y(s)?s(n):!1;g(e)||o.value||i||(o.value=!0,t("focus",n),p?.())},v=n=>{var i;const u=y(l)?l(n):!1;g(e)||n.relatedTarget&&((i=a.value)!=null&&i.contains(n.relatedTarget))||u||(o.value=!1,t("blur",n),c?.())},C=n=>{var i,u;g(e)||E(n.target)||(i=a.value)!=null&&i.contains(document.activeElement)&&a.value!==document.activeElement||(u=r.value)==null||u.focus()};return k([a,()=>g(e)],([n,i])=>{n&&(i?n.removeAttribute("tabindex"):n.setAttribute("tabindex","-1"))}),_(a,"focus",d,!0),_(a,"blur",v,!0),_(a,"click",C,!0),{isFocused:o,wrapperRef:a,handleFocus:d,handleBlur:v}}const G=r=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(r);function et({afterComposition:r,emit:e}){const s=x(!1),p=t=>{e?.("compositionstart",t),s.value=!0},l=t=>{var a;e?.("compositionupdate",t);const o=(a=t.target)==null?void 0:a.value,d=o[o.length-1]||"";s.value=!G(d)},c=t=>{e?.("compositionend",t),s.value&&(s.value=!1,F(()=>r(t)))};return{isComposing:s,handleComposition:t=>{t.type==="compositionend"?c(t):l(t)},handleCompositionStart:p,handleCompositionUpdate:l,handleCompositionEnd:c}}const O=z({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:$,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),Q=w({name:"ElText"}),V=w({...Q,props:O,setup(r){const e=r,s=x(),p=q(),l=R("text"),c=H(()=>[l.b(),l.m(e.type),l.m(p.value),l.is("truncated",e.truncated),l.is("line-clamp",!b(e.lineClamp))]),f=()=>{var t,a,o,d,v,C,n;if(J().title)return;let u=!1;const S=((t=s.value)==null?void 0:t.textContent)||"";if(e.truncated){const m=(a=s.value)==null?void 0:a.offsetWidth,h=(o=s.value)==null?void 0:o.scrollWidth;m&&h&&h>m&&(u=!0)}else if(!b(e.lineClamp)){const m=(d=s.value)==null?void 0:d.offsetHeight,h=(v=s.value)==null?void 0:v.scrollHeight;m&&h&&h>m&&(u=!0)}u?(C=s.value)==null||C.setAttribute("title",S):(n=s.value)==null||n.removeAttribute("title")};return I(f),U(f),(t,a)=>(D(),W(j(t.tag),{ref_key:"textRef",ref:s,class:P(g(c)),style:N({"-webkit-line-clamp":t.lineClamp})},{default:K(()=>[L(t.$slots,"default")]),_:3},8,["class","style"]))}});var X=B(V,[["__file","text.vue"]]);const st=M(X);export{st as E,tt as a,et as u};
