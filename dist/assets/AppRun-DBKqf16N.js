import{aV as Xe,L as Q,b as Z,l as O,t as te,f as B,u as fe,e as w,v as R,o as C,y as N,z as k,A as e,k as z,G as Te,a7 as ve,r as T,d as We,n as re,q as ze,a6 as Ae,ap as M,aW as Ge,ak as F,aX as pe,m as qe,am as ke,aY as Be,aZ as Re,a_ as Ze,a$ as Je,U as Qe,b0 as et,a8 as tt,O as Ie,b1 as ee,c as se,w as n,h as r,$ as ot,x as P,a1 as at,ac as nt,E as X,b2 as st,av as ne,b3 as rt,b4 as lt,a as S,B as W,b5 as it,b6 as ct,C as ut,b7 as dt,b8 as pt,aw as ft,a5 as vt,Y as De,b9 as mt,ba as gt,ag as bt,a2 as Se,a3 as ht,bb as Pe,bc as Ne,bd as wt,an as yt,be as _t,H as Ct,s as Et,aB as Tt,bf as kt,bg as It,g as He,aH as St,bh as Lt}from"./index-BeEJhNwy.js";import{E as $t,a as At}from"./el-col-C6h1o6T9.js";import{d as Rt,k as Pt,j as Nt,f as Me,h as Ve,e as xe,l as Ot,m as zt}from"./el-table-column-CId42rLe.js";import{E as Bt}from"./el-button-BZ06c93L.js";import{u as Ye}from"./index-BGS8AIOQ.js";import{u as Dt}from"./index-CMGbZOuE.js";import"./use-form-common-props-Ce0Eww0O.js";import"./event-BB_Ol6Sd.js";var Ht="Expected a function";function Ce(t,c,o){var a=!0,s=!0;if(typeof t!="function")throw new TypeError(Ht);return Xe(o)&&(a="leading"in o?!!o.leading:a,s="trailing"in o?!!o.trailing:s),Rt(t,c,{leading:a,maxWait:c,trailing:s})}const Mt=(t,c)=>{if(!Q||!t||!c)return!1;const o=t.getBoundingClientRect();let a;return c instanceof Element?a=c.getBoundingClientRect():a={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},o.top<a.bottom&&o.bottom>a.top&&o.right>a.left&&o.left<a.right},Vt=Z({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:O(String),default:"solid"}}),xt=B({name:"ElDivider"}),Yt=B({...xt,props:Vt,setup(t){const c=t,o=fe("divider"),a=w(()=>o.cssVar({"border-style":c.borderStyle}));return(s,v)=>(C(),R("div",{class:k([e(o).b(),e(o).m(s.direction)]),style:Te(e(a)),role:"separator"},[s.$slots.default&&s.direction!=="vertical"?(C(),R("div",{key:0,class:k([e(o).e("text"),e(o).is(s.contentPosition)])},[z(s.$slots,"default")],2)):N("v-if",!0)],6))}});var Ft=te(Yt,[["__file","divider.vue"]]);const Ut=ve(Ft),Kt=B({inheritAttrs:!1});function jt(t,c,o,a,s,v){return z(t.$slots,"default")}var Xt=te(Kt,[["render",jt],["__file","collection.vue"]]);const Wt=B({name:"ElCollectionItem",inheritAttrs:!1});function Gt(t,c,o,a,s,v){return z(t.$slots,"default")}var qt=te(Wt,[["render",Gt],["__file","collection-item.vue"]]);const Zt="data-el-collection-item",Jt=t=>{const c=`El${t}Collection`,o=`${c}Item`,a=Symbol(c),s=Symbol(o),v={...Xt,name:c,setup(){const h=T(),y=new Map;Ae(a,{itemMap:y,getItems:()=>{const b=e(h);if(!b)return[];const i=Array.from(b.querySelectorAll(`[${Zt}]`));return[...y.values()].sort(($,p)=>i.indexOf($.ref)-i.indexOf(p.ref))},collectionRef:h})}},m={...qt,name:o,setup(h,{attrs:y}){const f=T(),b=We(a,void 0);Ae(s,{collectionItemRef:f}),re(()=>{const i=e(f);i&&b.itemMap.set(i,{ref:i,...y})}),ze(()=>{const i=e(f);b.itemMap.delete(i)})}};return{COLLECTION_INJECTION_KEY:a,COLLECTION_ITEM_INJECTION_KEY:s,ElCollection:v,ElCollectionItem:m}},Ee=Z({trigger:pe.trigger,triggerKeys:{type:O(Array),default:()=>[F.enter,F.numpadEnter,F.space,F.down]},effect:{...M.effect,default:"light"},type:{type:O(String)},placement:{type:O(String),default:"bottom"},popperOptions:{type:O(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:O([Number,String]),default:0},maxHeight:{type:O([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,values:Ge,default:"menu"},buttonProps:{type:O(Object)},teleported:M.teleported,persistent:{type:Boolean,default:!0}});Z({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:qe}});Z({onKeydown:{type:O(Function)}});Jt("Dropdown");const Qt=Z({urlList:{type:O(Array),default:()=>Be([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:O(String)}}),eo={close:()=>!0,switch:t=>ke(t),rotate:t=>ke(t)},to=B({name:"ElImageViewer"}),oo=B({...to,props:Qt,emits:eo,setup(t,{expose:c,emit:o}){var a;const s=t,v={CONTAIN:{name:"contain",icon:Re(Je)},ORIGINAL:{name:"original",icon:Re(Ze)}};let m,h="";const{t:y}=Ye(),f=fe("image-viewer"),{nextZIndex:b}=Qe(),i=T(),L=T([]),$=et(),p=T(!0),_=T(s.initialIndex),u=tt(v.CONTAIN),g=T({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),oe=T((a=s.zIndex)!=null?a:b()),G=w(()=>{const{urlList:l}=s;return l.length<=1}),J=w(()=>_.value===0),A=w(()=>_.value===s.urlList.length-1),U=w(()=>s.urlList[_.value]),me=w(()=>[f.e("btn"),f.e("prev"),f.is("disabled",!s.infinite&&J.value)]),ge=w(()=>[f.e("btn"),f.e("next"),f.is("disabled",!s.infinite&&A.value)]),le=w(()=>{const{scale:l,deg:I,offsetX:E,offsetY:H,enableTransition:x}=g.value;let Y=E/l,j=H/l;const ae=I*Math.PI/180,Le=Math.cos(ae),$e=Math.sin(ae);Y=Y*Le+j*$e,j=j*Le-E/l*$e;const _e={transform:`scale(${l}) rotate(${I}deg) translate(${Y}px, ${j}px)`,transition:x?"transform .3s":""};return u.value.name===v.CONTAIN.name&&(_e.maxWidth=_e.maxHeight="100%"),_e}),ie=w(()=>`${_.value+1} / ${s.urlList.length}`);function q(){ue(),m?.(),document.body.style.overflow=h,o("close")}function ce(){const l=Ce(E=>{switch(E.code){case F.esc:s.closeOnPressEscape&&q();break;case F.space:V();break;case F.left:we();break;case F.up:K("zoomIn");break;case F.right:ye();break;case F.down:K("zoomOut");break}}),I=Ce(E=>{const H=E.deltaY||E.deltaX;K(H<0?"zoomIn":"zoomOut",{zoomRate:s.zoomRate,enableTransition:!1})});$.run(()=>{ee(document,"keydown",l),ee(document,"wheel",I)})}function ue(){$.stop()}function be(){p.value=!1}function he(l){p.value=!1,l.target.alt=y("el.image.error")}function d(l){if(p.value||l.button!==0||!i.value)return;g.value.enableTransition=!1;const{offsetX:I,offsetY:E}=g.value,H=l.pageX,x=l.pageY,Y=Ce(ae=>{g.value={...g.value,offsetX:I+ae.pageX-H,offsetY:E+ae.pageY-x}}),j=ee(document,"mousemove",Y);ee(document,"mouseup",()=>{j()}),l.preventDefault()}function D(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function V(){if(p.value)return;const l=Pt(v),I=Object.values(v),E=u.value.name,x=(I.findIndex(Y=>Y.name===E)+1)%l.length;u.value=v[l[x]],D()}function de(l){const I=s.urlList.length;_.value=(l+I)%I}function we(){J.value&&!s.infinite||de(_.value-1)}function ye(){A.value&&!s.infinite||de(_.value+1)}function K(l,I={}){if(p.value)return;const{minScale:E,maxScale:H}=s,{zoomRate:x,rotateDeg:Y,enableTransition:j}={zoomRate:s.zoomRate,rotateDeg:90,enableTransition:!0,...I};switch(l){case"zoomOut":g.value.scale>E&&(g.value.scale=Number.parseFloat((g.value.scale/x).toFixed(3)));break;case"zoomIn":g.value.scale<H&&(g.value.scale=Number.parseFloat((g.value.scale*x).toFixed(3)));break;case"clockwise":g.value.deg+=Y,o("rotate",g.value.deg);break;case"anticlockwise":g.value.deg-=Y,o("rotate",g.value.deg);break}g.value.enableTransition=j}function Ue(l){var I;((I=l.detail)==null?void 0:I.focusReason)==="pointer"&&l.preventDefault()}function Ke(){s.closeOnPressEscape&&q()}function je(l){if(l.ctrlKey){if(l.deltaY<0)return l.preventDefault(),!1;if(l.deltaY>0)return l.preventDefault(),!1}}return Ie(U,()=>{De(()=>{const l=L.value[0];l?.complete||(p.value=!0)})}),Ie(_,l=>{D(),o("switch",l)}),re(()=>{ce(),m=ee("wheel",je,{passive:!1}),h=document.body.style.overflow,document.body.style.overflow="hidden"}),c({setActiveItem:de}),(l,I)=>(C(),se(e(vt),{to:"body",disabled:!l.teleported},{default:n(()=>[r(ot,{name:"viewer-fade",appear:""},{default:n(()=>[P("div",{ref_key:"wrapper",ref:i,tabindex:-1,class:k(e(f).e("wrapper")),style:Te({zIndex:oe.value})},[r(e(at),{loop:"",trapped:"","focus-trap-el":i.value,"focus-start-el":"container",onFocusoutPrevented:Ue,onReleaseRequested:Ke},{default:n(()=>[P("div",{class:k(e(f).e("mask")),onClick:nt(E=>l.hideOnClickModal&&q(),["self"])},null,10,["onClick"]),N(" CLOSE "),P("span",{class:k([e(f).e("btn"),e(f).e("close")]),onClick:q},[r(e(X),null,{default:n(()=>[r(e(st))]),_:1})],2),N(" ARROW "),e(G)?N("v-if",!0):(C(),R(ne,{key:0},[P("span",{class:k(e(me)),onClick:we},[r(e(X),null,{default:n(()=>[r(e(rt))]),_:1})],2),P("span",{class:k(e(ge)),onClick:ye},[r(e(X),null,{default:n(()=>[r(e(lt))]),_:1})],2)],64)),l.$slots.progress||l.showProgress?(C(),R("div",{key:1,class:k([e(f).e("btn"),e(f).e("progress")])},[z(l.$slots,"progress",{activeIndex:_.value,total:l.urlList.length},()=>[S(W(e(ie)),1)])],2)):N("v-if",!0),N(" ACTIONS "),P("div",{class:k([e(f).e("btn"),e(f).e("actions")])},[P("div",{class:k(e(f).e("actions__inner"))},[z(l.$slots,"toolbar",{actions:K,prev:we,next:ye,reset:V,activeIndex:_.value,setActiveItem:de},()=>[r(e(X),{onClick:E=>K("zoomOut")},{default:n(()=>[r(e(it))]),_:1},8,["onClick"]),r(e(X),{onClick:E=>K("zoomIn")},{default:n(()=>[r(e(ct))]),_:1},8,["onClick"]),P("i",{class:k(e(f).e("actions__divider"))},null,2),r(e(X),{onClick:V},{default:n(()=>[(C(),se(ut(e(u).icon)))]),_:1}),P("i",{class:k(e(f).e("actions__divider"))},null,2),r(e(X),{onClick:E=>K("anticlockwise")},{default:n(()=>[r(e(dt))]),_:1},8,["onClick"]),r(e(X),{onClick:E=>K("clockwise")},{default:n(()=>[r(e(pt))]),_:1},8,["onClick"])])],2)],2),N(" CANVAS "),P("div",{class:k(e(f).e("canvas"))},[(C(!0),R(ne,null,ft(l.urlList,(E,H)=>(C(),R(ne,{key:H},[H===_.value?(C(),R("img",{key:0,ref_for:!0,ref:x=>L.value[H]=x,src:E,style:Te(e(le)),class:k(e(f).e("img")),crossorigin:l.crossorigin,onLoad:be,onError:he,onMousedown:d},null,46,["src","crossorigin"])):N("v-if",!0)],64))),128))],2),z(l.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var ao=te(oo,[["__file","image-viewer.vue"]]);const no=ve(ao),so=Z({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:O([String,Object])},previewSrcList:{type:O(Array),default:()=>Be([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:O(String)}}),ro={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>ke(t),close:()=>!0,show:()=>!0},lo=B({name:"ElImage",inheritAttrs:!1}),io=B({...lo,props:so,emits:ro,setup(t,{expose:c,emit:o}){const a=t,{t:s}=Ye(),v=fe("image"),m=mt(),h=w(()=>gt(Object.entries(m).filter(([d])=>/^(data-|on[A-Z])/i.test(d)||["id","style"].includes(d)))),y=Dt({excludeListeners:!0,excludeKeys:w(()=>Object.keys(h.value))}),f=T(),b=T(!1),i=T(!0),L=T(!1),$=T(),p=T(),_=Q&&"loading"in HTMLImageElement.prototype;let u;const g=w(()=>[v.e("inner"),G.value&&v.e("preview"),i.value&&v.is("loading")]),oe=w(()=>{const{fit:d}=a;return Q&&d?{objectFit:d}:{}}),G=w(()=>{const{previewSrcList:d}=a;return bt(d)&&d.length>0}),J=w(()=>{const{previewSrcList:d,initialIndex:D}=a;let V=D;return D>d.length-1&&(V=0),V}),A=w(()=>a.loading==="eager"?!1:!_&&a.loading==="lazy"||a.lazy),U=()=>{Q&&(i.value=!0,b.value=!1,f.value=a.src)};function me(d){i.value=!1,b.value=!1,o("load",d)}function ge(d){i.value=!1,b.value=!0,o("error",d)}function le(){Mt($.value,p.value)&&(U(),ce())}const ie=_t(le,200,!0);async function q(){var d;if(!Q)return;await De();const{scrollContainer:D}=a;wt(D)?p.value=D:yt(D)&&D!==""?p.value=(d=document.querySelector(D))!=null?d:void 0:$.value&&(p.value=Nt($.value)),p.value&&(u=ee(p,"scroll",ie),setTimeout(()=>le(),100))}function ce(){!Q||!p.value||!ie||(u?.(),p.value=void 0)}function ue(){G.value&&(L.value=!0,o("show"))}function be(){L.value=!1,o("close")}function he(d){o("switch",d)}return Ie(()=>a.src,()=>{A.value?(i.value=!0,b.value=!1,ce(),q()):U()}),re(()=>{A.value?q():U()}),c({showPreview:ue}),(d,D)=>(C(),R("div",Se({ref_key:"container",ref:$},e(h),{class:[e(v).b(),d.$attrs.class]}),[b.value?z(d.$slots,"error",{key:0},()=>[P("div",{class:k(e(v).e("error"))},W(e(s)("el.image.error")),3)]):(C(),R(ne,{key:1},[f.value!==void 0?(C(),R("img",Se({key:0},e(y),{src:f.value,loading:d.loading,style:e(oe),class:e(g),crossorigin:d.crossorigin,onClick:ue,onLoad:me,onError:ge}),null,16,["src","loading","crossorigin"])):N("v-if",!0),i.value?(C(),R("div",{key:1,class:k(e(v).e("wrapper"))},[z(d.$slots,"placeholder",{},()=>[P("div",{class:k(e(v).e("placeholder"))},null,2)])],2)):N("v-if",!0)],64)),e(G)?(C(),R(ne,{key:2},[L.value?(C(),se(e(no),{key:0,"z-index":d.zIndex,"initial-index":e(J),infinite:d.infinite,"zoom-rate":d.zoomRate,"min-scale":d.minScale,"max-scale":d.maxScale,"show-progress":d.showProgress,"url-list":d.previewSrcList,crossorigin:d.crossorigin,"hide-on-click-modal":d.hideOnClickModal,teleported:d.previewTeleported,"close-on-press-escape":d.closeOnPressEscape,onClose:be,onSwitch:he},ht({toolbar:n(V=>[z(d.$slots,"toolbar",Pe(Ne(V)))]),default:n(()=>[d.$slots.viewer?(C(),R("div",{key:0},[z(d.$slots,"viewer")])):N("v-if",!0)]),_:2},[d.$slots.progress?{name:"progress",fn:n(V=>[z(d.$slots,"progress",Pe(Ne(V)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):N("v-if",!0)],64)):N("v-if",!0)],16))}});var co=te(io,[["__file","image.vue"]]);const uo=ve(co),po=Z({trigger:pe.trigger,triggerKeys:pe.triggerKeys,placement:Ee.placement,disabled:pe.disabled,visible:M.visible,transition:M.transition,popperOptions:Ee.popperOptions,tabindex:Ee.tabindex,content:M.content,popperStyle:M.popperStyle,popperClass:M.popperClass,enterable:{...M.enterable,default:!0},effect:{...M.effect,default:"light"},teleported:M.teleported,appendTo:M.appendTo,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),fo={"update:visible":t=>Ct(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},vo="onUpdate:visible",mo=B({name:"ElPopover"}),go=B({...mo,props:po,emits:fo,setup(t,{expose:c,emit:o}){const a=t,s=w(()=>a[vo]),v=fe("popover"),m=T(),h=w(()=>{var u;return(u=e(m))==null?void 0:u.popperRef}),y=w(()=>[{width:Et(a.width)},a.popperStyle]),f=w(()=>[v.b(),a.popperClass,{[v.m("plain")]:!!a.content}]),b=w(()=>a.transition===`${v.namespace.value}-fade-in-linear`),i=()=>{var u;(u=m.value)==null||u.hide()},L=()=>{o("before-enter")},$=()=>{o("before-leave")},p=()=>{o("after-enter")},_=()=>{o("update:visible",!1),o("after-leave")};return c({popperRef:h,hide:i}),(u,g)=>(C(),se(e(Tt),Se({ref_key:"tooltipRef",ref:m},u.$attrs,{trigger:u.trigger,"trigger-keys":u.triggerKeys,placement:u.placement,disabled:u.disabled,visible:u.visible,transition:u.transition,"popper-options":u.popperOptions,tabindex:u.tabindex,content:u.content,offset:u.offset,"show-after":u.showAfter,"hide-after":u.hideAfter,"auto-close":u.autoClose,"show-arrow":u.showArrow,"aria-label":u.title,effect:u.effect,enterable:u.enterable,"popper-class":e(f),"popper-style":e(y),teleported:u.teleported,"append-to":u.appendTo,persistent:u.persistent,"gpu-acceleration":e(b),"onUpdate:visible":e(s),onBeforeShow:L,onBeforeHide:$,onShow:p,onHide:_}),{content:n(()=>[u.title?(C(),R("div",{key:0,class:k(e(v).e("title")),role:"title"},W(u.title),3)):N("v-if",!0),z(u.$slots,"default",{},()=>[S(W(u.content),1)])]),default:n(()=>[u.$slots.reference?z(u.$slots,"reference",{key:0}):N("v-if",!0)]),_:3},16,["trigger","trigger-keys","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","append-to","persistent","gpu-acceleration","onUpdate:visible"]))}});var bo=te(go,[["__file","popover.vue"]]);const Oe=(t,c)=>{const o=c.arg||c.value,a=o?.popperRef;a&&(a.triggerRef=t)};var ho={mounted(t,c){Oe(t,c)},updated(t,c){Oe(t,c)}};const wo="popover",yo=kt(ho,wo),_o=ve(bo,{directive:yo}),Fe=It("scriptDataStore",{state:()=>({characterTables:[],logsList:[]}),getters:{getCharacterTables(t){return t.characterTables},getLogsList(t){return t.logsList}},actions:{async updateCharacterTables(t){if(t.hwnd===void 0)return;const c=this.characterTables.findIndex(o=>o.hwnd===t.hwnd);c!==-1&&(t.character&&(this.characterTables[c].character=t.character),t.state&&(this.characterTables[c].state=t.state))},async addCharacterTables(t){this.characterTables.push(t)},async deleteCharacterTables(t){const c=this.characterTables.findIndex(o=>o.hwnd===t);c!==-1&&this.characterTables.splice(c,1)},async updateLogsList(t){this.logsList.unshift(t),this.logsList.length=Math.min(this.logsList.length,1e3)}},persist:{storage:sessionStorage}});function Co(){const{appContext:t}=He(),c=T(),o=T(0),a=St(),s=Fe(),v=w(()=>s.getCharacterTables),m=async()=>{window.pywebview.api.emit("API:SCRIPT:START",a.getTaskConfig)},h=async p=>{window.pywebview.api.emit("API:SCRIPT:UNBIND",p.hwnd),await s.deleteCharacterTables(p.hwnd)},y=async p=>{window.pywebview.api.emit("API:SCRIPT:STOP",p.hwnd)},f=async p=>{window.pywebview.api.emit("API:SCRIPT:RESUME",p.hwnd)},b=async p=>{window.pywebview.api.emit("API:SCRIPT:SCREENSHOT",p.hwnd)},i=()=>{if(c.value){const p=c.value.clientHeight;o.value=p-10}},L=async p=>{await s.updateCharacterTables(p)},$=async p=>{await s.addCharacterTables(p)};return re(()=>{console.log("useCharacterTable mounted"),i(),window.addEventListener("resize",i),t.config.globalProperties.$mitt.on("API:UPDATE:CHARACTER",L),t.config.globalProperties.$mitt.on("API:ADD:CHARACTER",$)}),Lt(()=>{console.log("useCharacterTable unmounted"),window.removeEventListener("resize",i),t.config.globalProperties.$mitt.off("API:UPDATE:CHARACTER",L),t.config.globalProperties.$mitt.off("API:ADD:CHARACTER",$)}),{characterTables:v,tableRef:c,tableHeight:o,taskConfigStore:a,start:m,unbind:h,stop:y,resume:f,screenshot:b}}const Eo=B({__name:"CharacterTable",setup(t){const{characterTables:c,tableRef:o,tableHeight:a,taskConfigStore:s,start:v,unbind:m,stop:h,resume:y,screenshot:f}=Co();return(b,i)=>{const L=xe,$=uo,p=Ve,_=Bt,u=Ut,g=zt,oe=Ot,G=_o,J=Me;return C(),R("div",{class:"h-100%",ref_key:"tableRef",ref:o},[r(J,{"highlight-current-row":"",height:e(a),data:e(c)},{empty:n(()=>i[1]||(i[1]=[P("span",null,null,-1)])),default:n(()=>[r(p,{width:"130",label:"角色信息"},{header:n(()=>[r(L,null,{default:n(()=>i[2]||(i[2]=[S("角色信息")])),_:1,__:[2]})]),default:n(A=>[r($,{fit:"contain",src:A.row.character},null,8,["src"])]),_:1}),r(p,{width:"100",label:"任务状态"},{header:n(()=>[r(L,null,{default:n(()=>i[3]||(i[3]=[S("任务状态")])),_:1,__:[3]})]),default:n(A=>[r(L,null,{default:n(()=>[S(W(A.row.state),1)]),_:2},1024)]),_:1}),r(p,{fixed:"right","min-width":"280",label:"操作"},{header:n(()=>[r(G,{placement:"right-start",width:300,trigger:"hover"},{reference:n(()=>[r(_,{onClick:e(v),size:"small",type:"success"},{default:n(()=>i[4]||(i[4]=[S("开始")])),_:1,__:[4]},8,["onClick"])]),default:n(()=>[P("div",null,[r(u,{"content-position":"center"},{default:n(()=>i[5]||(i[5]=[S("切换角色")])),_:1,__:[5]}),r(oe,{modelValue:e(s).switchCharacterList,"onUpdate:modelValue":i[0]||(i[0]=A=>e(s).switchCharacterList=A)},{default:n(()=>[r(g,{label:"角色1",value:"characterOne"}),r(g,{label:"角色2",value:"characterTwo"}),r(g,{label:"角色3",value:"characterThree"}),r(g,{label:"角色4",value:"characterFour"}),r(g,{label:"角色5",value:"characterFive"})]),_:1},8,["modelValue"])])]),_:1})]),default:n(A=>[r(_,{onClick:U=>e(h)(A.row),size:"small"},{default:n(()=>i[6]||(i[6]=[S("暂停")])),_:2,__:[6]},1032,["onClick"]),r(_,{onClick:U=>e(y)(A.row),size:"small"},{default:n(()=>i[7]||(i[7]=[S("恢复")])),_:2,__:[7]},1032,["onClick"]),r(_,{onClick:U=>e(m)(A.row),size:"small"},{default:n(()=>i[8]||(i[8]=[S("解绑")])),_:2,__:[8]},1032,["onClick"]),r(_,{onClick:U=>e(f)(A.row),size:"small"},{default:n(()=>i[9]||(i[9]=[S("截图")])),_:2,__:[9]},1032,["onClick"])]),_:1})]),_:1},8,["height","data"])],512)}}});function To(){const t=Fe(),c=w(()=>t.getLogsList),{appContext:o}=He(),a=T(),s=T(),v=T(0),m=async y=>{await t.updateLogsList(y)},h=()=>{if(a.value){const y=a.value.clientHeight;v.value=y-10}};return re(()=>{h(),window.addEventListener("resize",h),o.config.globalProperties.$mitt.on("API:ADD:LOGS",m)}),ze(()=>{window.removeEventListener("resize",h),o.config.globalProperties.$mitt.off("API:ADD:LOGS",m)}),{logList:c,tableRef:a,logTableRef:s,tableHeight:v,addLog:m}}const ko=B({__name:"AppLogs",setup(t){const{logList:c,tableHeight:o,tableRef:a,logTableRef:s}=To();return(v,m)=>{const h=xe,y=Ve,f=Me;return C(),R("div",{class:"h-100%",ref_key:"tableRef",ref:a},[r(f,{ref_key:"logTableRef",ref:s,data:e(c),height:e(o)},{empty:n(()=>m[0]||(m[0]=[P("span",null,null,-1)])),default:n(()=>[r(y,{width:"180"},{header:n(()=>[r(h,null,{default:n(()=>m[1]||(m[1]=[S("时间")])),_:1,__:[1]})]),default:n(b=>[S(W(b.row.time),1)]),_:1}),r(y,{width:"80"},{header:n(()=>[r(h,null,{default:n(()=>m[2]||(m[2]=[S("等级")])),_:1,__:[2]})]),default:n(b=>[S(W(b.row.info),1)]),_:1}),r(y,{"min-width":"150",fixed:"right"},{header:n(()=>[r(h,null,{default:n(()=>m[3]||(m[3]=[S("内容")])),_:1,__:[3]})]),default:n(b=>[S(W(b.row.data),1)]),_:1})]),_:1},8,["data","height"])],512)}}}),Oo=B({__name:"AppRun",setup(t){return(c,o)=>{const a=At,s=$t;return C(),se(s,{class:"h-100%"},{default:n(()=>[r(a,{class:"h-100%",span:14},{default:n(()=>[r(Eo)]),_:1}),r(a,{span:10},{default:n(()=>[r(ko)]),_:1})]),_:1})}}});export{Oo as default};
