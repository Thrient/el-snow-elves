import{S as x,an as b,V as g,L as A,b4 as p,m as C,y as f,c0 as E,Y as _}from"./index-Cxwme0eA.js";function T(l,{disabled:t,beforeFocus:e,afterFocus:r,beforeBlur:i,afterBlur:c}={}){const m=x(),{emit:n}=m,a=b(),u=g(!1),d=o=>{const s=C(e)?e(o):!1;f(t)||u.value||s||(u.value=!0,n("focus",o),r?.())},h=o=>{var s;const v=C(i)?i(o):!1;f(t)||o.relatedTarget&&((s=a.value)!=null&&s.contains(o.relatedTarget))||v||(u.value=!1,n("blur",o),c?.())},F=o=>{var s,v;f(t)||E(o.target)||(s=a.value)!=null&&s.contains(document.activeElement)&&a.value!==document.activeElement||(v=l.value)==null||v.focus()};return A([a,()=>f(t)],([o,s])=>{o&&(s?o.removeAttribute("tabindex"):o.setAttribute("tabindex","-1"))}),p(a,"focus",d,!0),p(a,"blur",h,!0),p(a,"click",F,!0),{isFocused:u,wrapperRef:a,handleFocus:d,handleBlur:h}}const k=l=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(l);function y({afterComposition:l,emit:t}){const e=g(!1),r=n=>{t?.("compositionstart",n),e.value=!0},i=n=>{var a;t?.("compositionupdate",n);const u=(a=n.target)==null?void 0:a.value,d=u[u.length-1]||"";e.value=!k(d)},c=n=>{t?.("compositionend",n),e.value&&(e.value=!1,_(()=>l(n)))};return{isComposing:e,handleComposition:n=>{n.type==="compositionend"?c(n):i(n)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:c}}export{y as a,T as u};
