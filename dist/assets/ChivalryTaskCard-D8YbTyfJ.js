import{i as q,am as _,aO as C,b as me,l as pe,ao as fe,t as be,f as G,u as ve,r as Ne,ae as _e,e as w,ai as k,O as Ve,n as ye,aP as he,v as R,o as V,a0 as J,y as X,h as p,A as a,ax as F,z as U,k as $,w as f,c as S,ar as Ee,aQ as Ie,E as Z,aR as ge,aS as we,a3 as Se,ac as Y,af as ee,K as Ce,an as xe,a7 as Te,aH as Pe,aL as Ae,a as te}from"./index-xBUo9-VJ.js";import{E as ke}from"./el-card-BcdNLbMo.js";import{E as Fe,a as $e}from"./el-col-CCxoapRo.js";import{E as ae}from"./el-input-B3bdlYIk.js";import{E as De}from"./el-text-Bk3fNMYC.js";import{a as Be,u as Le,b as Oe}from"./use-form-common-props-CZPZO7u_.js";import{U as E,I as D,C as re}from"./event-BB_Ol6Sd.js";import{u as Me}from"./index-Dax0OIZG.js";import{u as ze}from"./use-form-item-BcYbjCmA.js";import"./index-D7_urkoo.js";import"./index-DSbuHJ7N.js";const Ke=100,Re=600,ne={beforeMount(o,v){const i=v.value,{interval:n=Ke,delay:y=Re}=q(i)?{}:i;let d,c;const l=()=>q(i)?i():i.handler(),b=()=>{c&&(clearTimeout(c),c=void 0),d&&(clearInterval(d),d=void 0)};o.addEventListener("mousedown",h=>{h.button===0&&(b(),l(),document.addEventListener("mouseup",()=>b(),{once:!0}),c=setTimeout(()=>{d=setInterval(()=>{l()},n)},y))})}},Ue=me({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:Be,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:o=>o===null||_(o)||["min","max"].includes(o),default:null},name:String,placeholder:String,precision:{type:Number,validator:o=>o>=0&&o===Number.parseInt(`${o}`,10)},validateEvent:{type:Boolean,default:!0},...fe(["ariaLabel"]),inputmode:{type:pe(String),default:void 0}}),Ye={[re]:(o,v)=>v!==o,blur:o=>o instanceof FocusEvent,focus:o=>o instanceof FocusEvent,[D]:o=>_(o)||C(o),[E]:o=>_(o)||C(o)},Ge=G({name:"ElInputNumber"}),He=G({...Ge,props:Ue,emits:Ye,setup(o,{expose:v,emit:i}){const n=o,{t:y}=Me(),d=ve("input-number"),c=Ne(),l=_e({currentValue:n.modelValue,userInput:null}),{formItem:b}=ze(),h=w(()=>_(n.modelValue)&&n.modelValue<=n.min),x=w(()=>_(n.modelValue)&&n.modelValue>=n.max),I=w(()=>{const e=W(n.step);return k(n.precision)?Math.max(W(n.modelValue),e):(e>n.precision,n.precision)}),B=w(()=>n.controls&&n.controlsPosition==="right"),H=Le(),g=Oe(),L=w(()=>{if(l.userInput!==null)return l.userInput;let e=l.currentValue;if(C(e))return"";if(_(e)){if(Number.isNaN(e))return"";k(n.precision)||(e=e.toFixed(n.precision))}return e}),O=(e,t)=>{if(k(t)&&(t=I.value),t===0)return Math.round(e);let r=String(e);const u=r.indexOf(".");if(u===-1||!r.replace(".","").split("")[u+t])return e;const P=r.length;return r.charAt(P-1)==="5"&&(r=`${r.slice(0,Math.max(0,P-1))}6`),Number.parseFloat(Number(r).toFixed(t))},W=e=>{if(C(e))return 0;const t=e.toString(),r=t.indexOf(".");let u=0;return r!==-1&&(u=t.length-r-1),u},Q=(e,t=1)=>_(e)?O(e+n.step*t):l.currentValue,M=()=>{if(n.readonly||g.value||x.value)return;const e=Number(L.value)||0,t=Q(e);T(t),i(D,l.currentValue),K()},z=()=>{if(n.readonly||g.value||h.value)return;const e=Number(L.value)||0,t=Q(e,-1);T(t),i(D,l.currentValue),K()},j=(e,t)=>{const{max:r,min:u,step:s,precision:N,stepStrictly:P,valueOnClear:A}=n;r<u&&Ce("InputNumber","min should not be greater than max.");let m=Number(e);if(C(e)||Number.isNaN(m))return null;if(e===""){if(A===null)return null;m=xe(A)?{min:u,max:r}[A]:A}return P&&(m=O(Math.round(m/s)*s,N),m!==e&&t&&i(E,m)),k(N)||(m=O(m,N)),(m>r||m<u)&&(m=m>r?r:u,t&&i(E,m)),m},T=(e,t=!0)=>{var r;const u=l.currentValue,s=j(e);if(!t){i(E,s);return}u===s&&e||(l.userInput=null,i(E,s),u!==s&&i(re,s,u),n.validateEvent&&((r=b?.validate)==null||r.call(b,"change").catch(N=>ee())),l.currentValue=s)},le=e=>{l.userInput=e;const t=e===""?null:Number(e);i(D,t),T(t,!1)},oe=e=>{const t=e!==""?Number(e):"";(_(t)&&!Number.isNaN(t)||e==="")&&T(t),K(),l.userInput=null},ue=()=>{var e,t;(t=(e=c.value)==null?void 0:e.focus)==null||t.call(e)},se=()=>{var e,t;(t=(e=c.value)==null?void 0:e.blur)==null||t.call(e)},ie=e=>{i("focus",e)},de=e=>{var t,r;l.userInput=null,l.currentValue===null&&((t=c.value)!=null&&t.input)&&(c.value.input.value=""),i("blur",e),n.validateEvent&&((r=b?.validate)==null||r.call(b,"blur").catch(u=>ee()))},K=()=>{l.currentValue!==n.modelValue&&(l.currentValue=n.modelValue)},ce=e=>{document.activeElement===e.target&&e.preventDefault()};return Ve(()=>n.modelValue,(e,t)=>{const r=j(e,!0);l.userInput===null&&r!==t&&(l.currentValue=r)},{immediate:!0}),ye(()=>{var e;const{min:t,max:r,modelValue:u}=n,s=(e=c.value)==null?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(r)?s.setAttribute("aria-valuemax",String(r)):s.removeAttribute("aria-valuemax"),Number.isFinite(t)?s.setAttribute("aria-valuemin",String(t)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),s.setAttribute("aria-disabled",String(g.value)),!_(u)&&u!=null){let N=Number(u);Number.isNaN(N)&&(N=null),i(E,N)}s.addEventListener("wheel",ce,{passive:!1})}),he(()=>{var e,t;const r=(e=c.value)==null?void 0:e.input;r?.setAttribute("aria-valuenow",`${(t=l.currentValue)!=null?t:""}`)}),v({focus:ue,blur:se}),(e,t)=>(V(),R("div",{class:U([a(d).b(),a(d).m(a(H)),a(d).is("disabled",a(g)),a(d).is("without-controls",!e.controls),a(d).is("controls-right",a(B))]),onDragstart:Y(()=>{},["prevent"])},[e.controls?J((V(),R("span",{key:0,role:"button","aria-label":a(y)("el.inputNumber.decrease"),class:U([a(d).e("decrease"),a(d).is("disabled",a(h))]),onKeydown:F(z,["enter"])},[$(e.$slots,"decrease-icon",{},()=>[p(a(Z),null,{default:f(()=>[a(B)?(V(),S(a(Ee),{key:0})):(V(),S(a(Ie),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[a(ne),z]]):X("v-if",!0),e.controls?J((V(),R("span",{key:1,role:"button","aria-label":a(y)("el.inputNumber.increase"),class:U([a(d).e("increase"),a(d).is("disabled",a(x))]),onKeydown:F(M,["enter"])},[$(e.$slots,"increase-icon",{},()=>[p(a(Z),null,{default:f(()=>[a(B)?(V(),S(a(ge),{key:0})):(V(),S(a(we),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[a(ne),M]]):X("v-if",!0),p(a(ae),{id:e.id,ref_key:"input",ref:c,type:"number",step:e.step,"model-value":a(L),placeholder:e.placeholder,readonly:e.readonly,disabled:a(g),size:a(H),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:[F(Y(M,["prevent"]),["up"]),F(Y(z,["prevent"]),["down"])],onBlur:de,onFocus:ie,onInput:le,onChange:oe},Se({_:2},[e.$slots.prefix?{name:"prefix",fn:f(()=>[$(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:f(()=>[$(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode","onKeydown"])],42,["onDragstart"]))}});var We=be(He,[["__file","input-number.vue"]]);const Qe=Te(We);function je(){return{taskConfigStore:Pe()}}const ut=G({__name:"ChivalryTaskCard",setup(o){const{taskConfigStore:v}=je();return(i,n)=>{const y=De,d=ae,c=Ae,l=$e,b=Qe,h=Fe,x=ke;return V(),S(x,{class:"w-100%",shadow:"hover"},{default:f(()=>[p(h,{gutter:20},{default:f(()=>[p(l,{span:8},{default:f(()=>[p(c,{class:"flex gap-x-xs"},{default:f(()=>[p(y,{"line-clamp":"1",type:"primary"},{default:f(()=>n[2]||(n[2]=[te("侠缘昵称或编号:")])),_:1,__:[2]}),p(d,{style:{width:"150px"},modelValue:a(v).$state.chivalryNameOrNumber,"onUpdate:modelValue":n[0]||(n[0]=I=>a(v).$state.chivalryNameOrNumber=I)},null,8,["modelValue"])]),_:1})]),_:1}),p(l,{span:8},{default:f(()=>[p(c,{class:"flex gap-x-xs"},{default:f(()=>[p(y,{"line-clamp":"1",type:"primary"},{default:f(()=>n[3]||(n[3]=[te("侠缘喊话次数:")])),_:1,__:[3]}),p(b,{modelValue:a(v).$state.chivalryShoutCount,"onUpdate:modelValue":n[1]||(n[1]=I=>a(v).$state.chivalryShoutCount=I),min:1,max:200},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{ut as default};
